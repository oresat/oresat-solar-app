/*
 * Copyright 2024 NXP
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/* Common dts file to enable supported features for CPU 0.
 * This file is included by both the default variant
 * which is run from internal flash and the QSPI variant.
 */
/dts-v1/;

#include <nxp/nxp_mcxn94x.dtsi>
#include <zephyr/dt-bindings/i2c/i2c.h>
#include <zephyr/dt-bindings/gpio/gpio.h>

/ {
	cpus {
		/delete-node/ cpu@1;
	};

	chosen {
		zephyr,sram = &sram0;
		zephyr,flash = &flash;
		zephyr,flash-controller = &fmu;
		zephyr,code-partition = &slot0_partition;
		zephyr,uart-mcumgr = &flexcomm4_lpuart4;
		zephyr,console = &flexcomm4_lpuart4;
		zephyr,shell-uart = &flexcomm4_lpuart4;
		zephyr,canbus = &flexcan0;
		zephyr,code-cpu1-partition = &slot1_partition;
	};

	aliases{
		led0 = &red_led;
		watchdog0 = &wwdt0;
		rtc = &rtc;
	};

	leds {
		compatible = "gpio-leds";
		red_led: led_1 {
			gpios = <&gpio1 13 GPIO_ACTIVE_LOW>;
			label = "Red LED";
			status = "okay";
		};
	};

	solargpios: solar-gpios {
		compatible = "solar-card";
		ina226-nalert-gpios = <&gpio4 4 0>;
		cell1-tmp101-alert-gpios = <&gpio4 20 0>;
		cell2-tmp101-alert-gpios = <&gpio4 23 0>;
		lt1618-enable-gpios = <&gpio4 2 GPIO_ACTIVE_HIGH>;
	};

	zephyr,user {
		dac = <&dac1>;
		dac-channel-id = <1>;
		dac-resolution = <12>;
		status = "okay";
	};
};

&flexcomm0 {
	status = "okay";
};

&flexcomm0_lpi2c0 {
	pinctrl-0 = <&pinmux_flexcomm0_lpi2c>;
	pinctrl-names = "default";
	clock-frequency = <I2C_BITRATE_STANDARD>;
	status = "okay";

	ina226: ina226@40 {
		compatible = "ti,ina226";
		reg = <0x40>;
		current-lsb-microamps = <500>;
		rshunt-micro-ohms = <100000>;
		status = "okay";
	};
	tmp101_cell1: tmp108@48 {
		compatible = "ti,tmp108";
		reg = <0x48>;
		status = "okay";
	};
	tmp101_cell2: tmp108@4a {
		compatible = "ti,tmp108";
		reg = <0x4a>;
		status = "okay";
	};
};

&flexcomm4 {
	status = "okay";
};

&flexcomm4_lpuart4 {
	current-speed = <115200>;
	pinctrl-0 = <&pinmux_flexcomm4_lpuart>;
	pinctrl-names = "default";
	status = "okay";
};

&dac1 {
	pinctrl-0 = <&pinmux_dac1>;
	pinctrl-names = "default";
	status = "okay";
};

&flexcan0 {
	pinctrl-0 = <&pinmux_flexcan0>;
	pinctrl-names = "default";
	status = "okay";
};

/*
 * Default for this board is to allocate SRAM0-5 to cpu0 but the
 * application can have an application specific device tree to
 * allocate the SRAM0-7 differently.
 *
 * For example, SRAM0-6 could be allocated to cpu0 with only SRAM7
 * for cpu1. This would require the value of sram0 to have a DT_SIZE_K
 * of 384. You would have to make updates to cpu1 sram settings as well.
 */
&sram0 {
	compatible = "mmio-sram";
	reg = <0x20000000 DT_SIZE_K(320)>;
};

&sram {
	sramg: memory@20050000 {
		compatible = "mmio-sram";
		reg = <0x20050000 DT_SIZE_K(64)>;
	};
	sramh: memory@20060000 {
		compatible = "mmio-sram";
		reg = <0x20060000 DT_SIZE_K(32)>;
	};
};

&flash {
	partitions {
		compatible = "fixed-partitions";
		#address-cells = <1>;
		#size-cells = <1>;

		/*
		 * Partition sizes must be aligned
		 * to the flash memory sector size of 8KB.
		 */
		boot_partition: partition@0 {
			label = "mcuboot";
			reg = <0x00000000 DT_SIZE_K(80)>;
		};
		slot0_partition: partition@14000 {
			label = "image-0";
			reg = <0x00014000 DT_SIZE_K(984)>;
		};
		slot1_partition: partition@10A000 {
			label = "image-1";
			reg = <0x0010A000 DT_SIZE_K(984)>;
		};
		/* storage_partition is placed in WINBOND flash memory*/
	};
};

&mbox {
	status = "okay";
};

&gpio4 {
	status = "okay";
};

&gpio1 {
	status = "okay";
};

&gpio0 {
	status = "okay";
};

&gpio2 {
	status = "okay";
};

&edma0 {
	status = "okay";
};

&wwdt0 {
	status = "okay";
};

&systick {
	status = "okay";
};

&ctimer0 {
	status = "okay";
};

&vref {
	status = "okay";
};

&lptmr0 {
	status = "okay";
};

&flexio0 {
	status = "okay";
};

&mrt0_channel0 {
	status = "okay";
};

&rtc {
	status = "okay";
};

&sc_timer {
	pinctrl-0 = <&pinmux_sctimer>;
	pinctrl-names = "default";
	status = "okay";
};

&enet {
	status = "disabled";
};
